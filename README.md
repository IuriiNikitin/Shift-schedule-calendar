# Shift schedule calendar
Календарь со скользящим графиком. Предоставляет удобный и понятный интерфейс для управления и отслеживания графика работы. Позволяет легко настроить свое расписание в соответствии с потребностями. Приложение полезно для людей с плавающим графиком, например, для работников пекарен, медсестер, смотрителей и т. д.
## Как работает
Пользователь выбирает в выпадающем списке один из нескольких заранее подготовленных графиков, сразу после выбора, календарь отображает его. Далее пользователь может редактировать выбранный график и просматривать статистику.
## Реализованные возможности
- Возможность выбора одного из 9 графиков.
- Быстрая навигация к нужному году / месяцу.
- Редактирование графика.
- Редактирование рабочего времени.
- Учёт праздничных дней.
- Добавление пользовательских заметок.
- Просмотр месячной статистики.

## Development
### Основа
Основой всей работы календаря является функция  ```getGraphic()``` которая принимает в себя 3 аргумента:  
```year``` - число, год вычисляемого графика в формате ГГГГ.  
```month``` - число, месяц вычисляемого графика в формате ММ.  
```graphic``` - строка, один из ключей объекта ```graphics```, содержащего объекты с возможными графиками.  

Функция возвращает массив из объектов каждый из которых представляет собой день месяца со всеми его данными.

Пример вывода ```getGraphic(2023, 12, “16.1-1”)``` :
```javascript
[
	{
		date: Fri Dec 01 2023 00:00:00 GMT+0300 (Москва, стандартное время){},
		actualType: "cal-mdg",
		graphicType: "cal-mdg",
		name: "День",
		descr: "Дневная смена",
		dayWeek: 5,
		finalTime: {actual: 11.7, graphic: 11.7},
		holiday: false,
		possibleTypes:  ['cal-ndg', 'cal-sick', 'cal-vac', 'day-off-oex'],
		note: "",
		dates: {
			actual:	{
				"break": [
					[
						Fri Dec 01 2023 11:30:00 GMT+0300 (Москва, стандартное время){},
						Fri Dec 01 2023 12:10:00 GMT+0300 (Москва, стандартное время){},
					],
					[
						Fri Dec 01 2023 16:00:00 GMT+0300 (Москва, стандартное время){},
						Fri Dec 01 2023 16:18:00 GMT+0300 (Москва, стандартное время){},
					]
				],
				shift: [
					Fri Dec 01 2023 07:20:00 GMT+0300 (Москва, стандартное время){},
					Fri Dec 01 2023 20:00:00 GMT+0300 (Москва, стандартное время){},
				],
			},
			graphic: {
				"break": [
					[
						Fri Dec 01 2023 11:30:00 GMT+0300 (Москва, стандартное время){},
						Fri Dec 01 2023 12:10:00 GMT+0300 (Москва, стандартное время){},
					],
					[
						Fri Dec 01 2023 16:00:00 GMT+0300 (Москва, стандартное время){},
						Fri Dec 01 2023 16:18:00 GMT+0300 (Москва, стандартное время){},
					]
				],
				shift: [
					Fri Dec 01 2023 07:20:00 GMT+0300 (Москва, стандартное время){},
					Fri Dec 01 2023 20:00:00 GMT+0300 (Москва, стандартное время){},
				]
			}
		},
		time: {
			actual: {
				"break": [
					['11:30', '12:10'] ,
					['16:00', '16:18'] 
				],
				shift: [ "07:20", "20:00" ],
			},
			graphic: {
				"break": [
					['11:30', '12:10'],
					['16:00', '16:18']
				],
				shift:  ["07:20", "20:00"],
			}
		}
	},
	{
		date: Fri Dec 02 2023 00:00:00 GMT+0300 (Москва, стандартное время){},
		actualType: "day-off",
		graphicType: "day-off",
		...
	},
	...
]
```
### Функционал вне UI
В приложении также есть отдельные файлы с данными, редактирование которых не отражено в пользовательском интерфейсе (UI) и позволяет создавать собственные уникальные графики.

<a href="https://github.com/IuriiNikitin/Shift-schedule-calendar/blob/main/data/days-data.js" target="_blank">days-data.js</a> - файл с всевозможными днями, представляет массив  ```days``` состоящий из объектов созданных классом ```Day```.

Пример объекта создаваемого классом ```Day```:
```javascript
new Day({
		name: "День",
		descr: "Дневная смена",
		dayType: "cal-mdg",
		time: {
			shift: ["07:20", "20:00"],
			"break": [
				["11:30", "12:10"],
				["16:00", "16:18"],
				],
		},
		possibleTypes: ["cal-ndg", "cal-sick", "cal-vac", "day-off-oex"],
})
```

```name``` - строка, краткое наименование дня.  
```descr``` - строка, полное наименование дня.  
```dayType``` - строка, уникальный id.  
```time``` - объект с двумя массивами ```shift``` и ```break```.  
```shift``` - массив с двумя строками внутри - начало рабочего дня и конец.  
```break``` - двумерный массив с массивами содержащими начало и конец перерывов.  
```possibleTypes``` - массив строк, каждая из которых уникальный id другого дня, необходимо для изменения типа дня в UI.  

<a href="https://github.com/IuriiNikitin/Shift-schedule-calendar/blob/main/data/graphics-data.js" target="_blank">graphics-data.js</a> - файл с заранее подготовленными графиками, представляет объект ```graphics```, ключами которого являются уникальные id графиков, а их значение объект с параметрами.

Пример содержимого объекта ```graphics```:
```javascript

{
...	
"16.2-2": {
   descr: "График 16 смена 2-2",
   startDate: "2000/01/07",
   pattern: [[morningDay, 3], [dayOff, 3], [nightDay, 3], [dayOff, 3]],
 },
 ...
}
```
```“16.2-2”``` - строка,  уникальный id графика.  
```descr``` - строка, описание графика.  
```startDate``` - строка, дата начала цикла в формате ГГГГ/ММ/ДД.  
```pattern``` - двумерный массив представляющий собой паттерн по которому будет выстраиваться график. Каждый элемент массива это массив с двумя элементами - объектом созданным классом ```Day```     (```morningDay```, ```dayOff```, ```nightDay```) и число - количество дней.  

<a href="https://github.com/IuriiNikitin/Shift-schedule-calendar/blob/main/data/holidays-list-data.js" target="_blank">holidays-list-data.js</a> - файл с учетом государственных праздников, представляет массив ```holidays```
элементами которого являются объекты с датой или датами праздников и описанием.

Пример:
```javascript
[
   {
       date:["01.01", "02.01", "03.01", "04.01", "05.01", "06.01", "08.01"],
       annotation:"Новогодние каникулы"
   },
   {
       date:"07.01",
       annotation:"Рождество Христово"
   },
	 ...
]
```
```date``` - строка или массив строк с датами в формате ДД.ММ.  
```annotation``` - название праздника.  
